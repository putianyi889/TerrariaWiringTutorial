\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{graphbox}
\usepackage{float}
\usepackage{etoolbox}

\makeatletter
\newcounter{savechapter}
\newcounter{apdxchapter}
\renewcommand\appendix{\par
  \setcounter{savechapter}{\value{chapter}}%
  \setcounter{chapter}{\value{apdxchapter}}%
  \setcounter{section}{0}%
  \ctexset{
    chapter/name={附录},
    chapter/number=\Alph{chapter}
  }
}
\newcommand\unappendix{\par
  \setcounter{apdxchapter}{\value{chapter}}%
  \setcounter{chapter}{\value{savechapter}}%
  \setcounter{section}{0}%
  \ctexset{
    chapter/name={第,章},
    chapter/number=\chinese{chapter}
  }
}
\makeatother

\lstset{basicstyle=\footnotesize\ttfamily,breaklines=true}

\ifcase\rendermode
\or % 1
  \usepackage[a4paper, left=2cm, right=2cm, top=0.5cm, bottom=0.5cm]{geometry}
\or % 2
\or % 3
  \usepackage[a4paper, left=2cm, right=2cm, top=0.5cm, bottom=0.5cm]{geometry}
\fi

\usepackage{adjustbox}
\adjustboxset{scale=0.666667, max width=\linewidth}

\usepackage[colorlinks]{hyperref}
\hypersetup{
  unicode=true,
  pdfencoding=unicode,
  bookmarksdepth=5,
}
\pdfstringdefDisableCommands{
  \def\myind#1{#1}
}

\if\rendermode2
  \usepackage{imakeidx}
  \makeindex
  \NewDocumentCommand{\myind}{m}{#1\index{#1}}
\else
  \NewDocumentCommand{\myind}{m}{#1}
\fi

\usepackage{seqsplit}
\newcommand{\trvar}[1]{\texttt{\seqsplit{#1}}}

\input{preambles/unicode}
\input{preambles/skin}
\input{preambles/envs}
\input{preambles/temps}
\input{preambles/terms}
\input{preambles/listing}

\renewcommand{\figureautorefname}{图}
\renewcommand{\tableautorefname}{表}
\renewcommand{\sectionautorefname}{节}
\renewcommand{\subsectionautorefname}{小节}
\renewcommand{\chapterautorefname}{章}
\renewcommand{\algorithmautorefname}{算法}
\renewcommand{\algorithmcfname}{算法}
\newcommand{\probautorefname}{例题}
\renewcommand\thesubfigure{(\alph{subfigure})}
\newcommand{\subfigureautorefname}{\figureautorefname}
\renewcommand\thesubtable{(\alph{subtable})}
\newcommand{\subtableautorefname}{\tableautorefname}